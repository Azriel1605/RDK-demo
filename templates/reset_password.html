{% extends "base.html" %}

{% block title %}Reset Password - Flask Warm App{% endblock %}

{% block content %}
<div style="max-width: 500px; margin: 0 auto;">
    <div class="card">
        <div class="text-center" style="margin-bottom: 2rem;">
            <h2 style="color: #8d6e63; font-size: 2rem;">🔓 Reset Password</h2>
            <p style="color: #6d4c41;">Create a new secure password for your account</p>
        </div>
        
        <div style="background: #e8f5e8; padding: 1.5rem; border-radius: 10px; margin-bottom: 2rem;">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="font-size: 2rem;">✅</div>
                <div>
                    <h4 style="color: #2e7d32; margin: 0 0 0.5rem 0;">Token Verified!</h4>
                    <p style="color: #1b5e20; margin: 0; font-size: 0.9rem;">
                        Your reset token is valid. Please enter your new password below.
                    </p>
                </div>
            </div>
        </div>
        
        <form method="POST">
            <div class="form-group">
                <label for="password" class="form-label">🔒 New Password</label>
                <div class="password-container">
                    <input type="password" id="password" name="password" class="form-control" required 
                           style="padding-right: 45px;" minlength="6"
                           placeholder="Enter your new password (min. 6 characters)">
                    <button type="button" class="password-toggle" onclick="togglePassword('password')">👁️</button>
                </div>
            </div>
            
            <div class="form-group">
                <label for="confirm_password" class="form-label">🔒 Confirm New Password</label>
                <div class="password-container">
                    <input type="password" id="confirm_password" name="confirm_password" class="form-control" required 
                           style="padding-right: 45px;" minlength="6"
                           placeholder="Confirm your new password">
                    <button type="button" class="password-toggle" onclick="togglePassword('confirm_password')">👁️</button>
                </div>
            </div>
            
            <div style="background: #fff3e0; padding: 1rem; border-radius: 10px; margin-bottom: 1.5rem;">
                <h4 style="color: #e65100; margin-bottom: 0.5rem;">🛡️ Password Requirements:</h4>
                <ul style="color: #bf360c; margin: 0; padding-left: 1.5rem; font-size: 0.9rem;">
                    <li>At least 6 characters long</li>
                    <li>Use a combination of letters, numbers, and symbols</li>
                    <li>Avoid using personal information</li>
                    <li>Don't reuse old passwords</li>
                </ul>
            </div>
            
            <button type="submit" class="btn btn-primary" style="width: 100%; font-size: 1.1rem; padding: 1rem;">
                🔐 Update Password
            </button>
        </form>
        
        <div style="text-align: center; margin-top: 2rem; padding-top: 1.5rem; border-top: 2px solid #f0f0f0;">
            <p style="color: #6d4c41; margin-bottom: 1rem;">Remember your password?</p>
            <a href="{{ url_for('login') }}" class="btn" style="text-decoration: none;">
                🔐 Back to Login
            </a>
        </div>
    </div>
</div>

<script>
    // Password confirmation validation
    document.getElementById('confirm_password').addEventListener('input', function() {
        const password = document.getElementById('password').value;
        const confirmPassword = this.value;
        
        if (password !== confirmPassword) {
            this.setCustomValidity('Passwords do not match');
            this.style.borderColor = '#f44336';
        } else {
            this.setCustomValidity('');
            this.style.borderColor = '#4caf50';
        }
    });
    
    document.getElementById('password').addEventListener('input', function() {
        const confirmPassword = document.getElementById('confirm_password');
        if (confirmPassword.value) {
            confirmPassword.dispatchEvent(new Event('input'));
        }
    });
</script>
{% endblock %}
